# è®¡åˆ’ä»»åŠ¡

# ä¸€æ¬¡æ€§è®¡åˆ’ä»»åŠ¡

**æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ**

```bash
[root@CitProbe script] systemctl status atd
â— atd.service - Deferred execution scheduler
     Loaded: loaded (/usr/lib/systemd/system/atd.service; enabled; preset: enabled)
     Active: active (running) since Tue 2024-07-16 17:21:21 CST; 1h 45min ago
       Docs: man:atd(8)
   Main PID: 1288 (atd)
      Tasks: 1 (limit: 22862)
     Memory: 300.0K
        CPU: 4ms
     CGroup: /system.slice/atd.service
             â””â”€1288 /usr/sbin/atd -f

Jul 16 17:21:21 CitProbe systemd[1]: Started Deferred execution scheduler.
```

**åˆ›å»ºä¸€æ¬¡æ€§è®¡åˆ’ä»»åŠ¡**

`at å‚æ•° æ“ä½œå¯¹è±¡ æ—¶é—´`

```bash
# äº¤äº’å¼at

# ä¸‹åˆäº”ç‚¹æ‰§è¡Œ
at 5:00PM
at> /root/sh.sh
at> <EOT>  # Ctrl+D

# å¦‚æœæ—¶é—´å·²è¿‡ åˆ™é¡ºå»¶åˆ°ç¬¬äºŒå¤©æ‰§è¡Œ

# æŒ‡å®šæ—¥æœŸå’Œæ—¶é—´
at 12:12 2024-7-16
at> /root/sh.sh
at> <EOT>  # Ctrl+D
```

**æŸ¥çœ‹ä¸€æ¬¡æ€§è®¡åˆ’ä»»åŠ¡**

`atq`

```bash

```

**åˆ é™¤ä¸€æ¬¡æ€§è®¡åˆ’ä»»åŠ¡**

`atrm`

**ä¸€æ¬¡æ€§è®¡åˆ’ä»»åŠ¡æ§åˆ¶**

`at.allow` ç™½åå•

`at.deny`   é»‘åå•

<aside>
ğŸ’¡ ç”¨äºè®¾ç½®ç”¨æˆ·è®¾ç½®ä¸€æ¬¡æ€§è®¡åˆ’çš„æƒé™

</aside>

# å‘¨æœŸæ€§è®¡åˆ’ä»»åŠ¡

**æ£€æŸ¥æœåŠ¡è¿è¡ŒçŠ¶æ€**

```bash
[root@CitProbe script] systemctl status crond
â— crond.service - Command Scheduler
     Loaded: loaded (/usr/lib/systemd/system/crond.service; enabled; preset: enabled)
     Active: active (running) since Tue 2024-07-16 17:21:21 CST; 3h 54min ago
   Main PID: 1289 (crond)
      Tasks: 1 (limit: 22862)
     Memory: 1.1M
        CPU: 106ms
     CGroup: /system.slice/crond.service
             â””â”€1289 /usr/sbin/crond -n
```

**å¸¸ç”¨å‘½ä»¤**

`crontab å‚æ•°`

```bash
-e # ç¼–è¾‘å½“å‰shellç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡
-e -u ç”¨æˆ·å # ç¼–è¾‘å…¶ä»–ç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡
-l # åˆ—å‡ºå½“å‰è®¡åˆ’ä»»åŠ¡
-l -u ç”¨æˆ·å # åˆ—å‡ºå…¶ä»–ç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡
```

```bash
*  *  *  *  *   command
åˆ† æ—¶ æ—¥ æœˆ å‘¨

* è¡¨ç¤ºåŒ¹é…ä»»ä½•å¯èƒ½çš„å€¼
, è¡¨ç¤ºå€¼åˆ—è¡¨ å¦‚1,2,5
- è¡¨ç¤ºèŒƒå›´ å¦‚1-5
/ è¡¨ç¤ºæ­¥é•¿ å¦‚*/2è¡¨ç¤ºæ¯éš”ä¸¤å•ä½
```

**é…ç½®æ–‡ä»¶**

`/etc/crontab`

```bash
# /etc/crontab

SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=root

# For details see man 4 crontabs

# Example of job definition:
# .---------------- minute (0 - 59)
# |  .------------- hour (0 - 23)
# |  |  .---------- day of month (1 - 31)
# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...
# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
# |  |  |  |  |
# *  *  *  *  * user-name  command to be executed
```

```bash
/etc/cron.daily  # æ¯å¤©æ‰§è¡Œ
/etc/cron.hourly # æ¯å°æ—¶æ‰§è¡Œ
/etc/cron.weekly # æ¯å‘¨æ‰§è¡Œ
/etc/cron.monthly# æ¯æœˆæ‰§è¡Œ
```

**æƒé™é…ç½®**

`/etc/cron.allow`

`/etc/cron.deny`

**ç§’çº§æ§åˆ¶**

`* * * * * sleep ç§’æ•° ; command`

**crontabçš„log**

`/var/log/cron`